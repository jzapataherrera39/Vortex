{"ast":null,"code":"import { create } from \"zustand\";\nimport { loginRequest, getProfileRequest } from \"../api/authApi\";\nexport const authStore = create(set => ({\n  user: null,\n  token: localStorage.getItem(\"token\") || null,\n  isAuthenticated: !!localStorage.getItem(\"token\"),\n  loading: true,\n  loadUser: async () => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) return set({\n      loading: false\n    });\n    try {\n      const user = await getProfileRequest(); // <-- usa el token en axios\n      set({\n        user,\n        isAuthenticated: true,\n        loading: false\n      });\n    } catch (error) {\n      localStorage.removeItem(\"token\");\n      set({\n        user: null,\n        token: null,\n        isAuthenticated: false,\n        loading: false\n      });\n    }\n  },\n  login: async (email, password) => {\n    const res = await loginRequest(email, password);\n    if (res !== null && res !== void 0 && res.token) {\n      localStorage.setItem(\"token\", res.token);\n      set({\n        user: res.user,\n        token: res.token,\n        isAuthenticated: true\n      });\n    }\n    return res;\n  },\n  logout: () => {\n    localStorage.removeItem(\"token\");\n    set({\n      user: null,\n      token: null,\n      isAuthenticated: false\n    });\n  }\n}));\n// Cargar el usuario al iniciar la aplicación\nauthStore.getState().loadUser();","map":{"version":3,"names":["create","loginRequest","getProfileRequest","authStore","set","user","token","localStorage","getItem","isAuthenticated","loading","loadUser","error","removeItem","login","email","password","res","setItem","logout","getState"],"sources":["/home/jorge/Escritorio/Prioridad/Prueba/vortex/frontend/src/store/authStore.js"],"sourcesContent":["import { create } from \"zustand\";\nimport { loginRequest, getProfileRequest } from \"../api/authApi\";\n\nexport const authStore = create((set) => ({\n  user: null,\n  token: localStorage.getItem(\"token\") || null,\n  isAuthenticated: !!localStorage.getItem(\"token\"),\n  loading: true,\n\n  loadUser: async () => {\n    const token = localStorage.getItem(\"token\");\n    if (!token) return set({ loading: false });\n\n    try {\n      const user = await getProfileRequest(); // <-- usa el token en axios\n      set({ user, isAuthenticated: true, loading: false });\n    } catch (error) {\n      localStorage.removeItem(\"token\");\n      set({ user: null, token: null, isAuthenticated: false, loading: false });\n    }\n  },\n\n  login: async (email, password) => {\n    const res = await loginRequest(email, password);\n\n    if (res?.token) {\n      localStorage.setItem(\"token\", res.token);\n      set({\n        user: res.user,\n        token: res.token,\n        isAuthenticated: true,\n      });\n    }\n\n    return res;\n  },\n\n  logout: () => {\n    localStorage.removeItem(\"token\");\n    set({ user: null, token: null, isAuthenticated: false });\n  },\n}));\n// Cargar el usuario al iniciar la aplicación\nauthStore.getState().loadUser();"],"mappings":"AAAA,SAASA,MAAM,QAAQ,SAAS;AAChC,SAASC,YAAY,EAAEC,iBAAiB,QAAQ,gBAAgB;AAEhE,OAAO,MAAMC,SAAS,GAAGH,MAAM,CAAEI,GAAG,KAAM;EACxCC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAEC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,IAAI,IAAI;EAC5CC,eAAe,EAAE,CAAC,CAACF,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAChDE,OAAO,EAAE,IAAI;EAEbC,QAAQ,EAAE,MAAAA,CAAA,KAAY;IACpB,MAAML,KAAK,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;IAC3C,IAAI,CAACF,KAAK,EAAE,OAAOF,GAAG,CAAC;MAAEM,OAAO,EAAE;IAAM,CAAC,CAAC;IAE1C,IAAI;MACF,MAAML,IAAI,GAAG,MAAMH,iBAAiB,CAAC,CAAC,CAAC,CAAC;MACxCE,GAAG,CAAC;QAAEC,IAAI;QAAEI,eAAe,EAAE,IAAI;QAAEC,OAAO,EAAE;MAAM,CAAC,CAAC;IACtD,CAAC,CAAC,OAAOE,KAAK,EAAE;MACdL,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC;MAChCT,GAAG,CAAC;QAAEC,IAAI,EAAE,IAAI;QAAEC,KAAK,EAAE,IAAI;QAAEG,eAAe,EAAE,KAAK;QAAEC,OAAO,EAAE;MAAM,CAAC,CAAC;IAC1E;EACF,CAAC;EAEDI,KAAK,EAAE,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,KAAK;IAChC,MAAMC,GAAG,GAAG,MAAMhB,YAAY,CAACc,KAAK,EAAEC,QAAQ,CAAC;IAE/C,IAAIC,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAEX,KAAK,EAAE;MACdC,YAAY,CAACW,OAAO,CAAC,OAAO,EAAED,GAAG,CAACX,KAAK,CAAC;MACxCF,GAAG,CAAC;QACFC,IAAI,EAAEY,GAAG,CAACZ,IAAI;QACdC,KAAK,EAAEW,GAAG,CAACX,KAAK;QAChBG,eAAe,EAAE;MACnB,CAAC,CAAC;IACJ;IAEA,OAAOQ,GAAG;EACZ,CAAC;EAEDE,MAAM,EAAEA,CAAA,KAAM;IACZZ,YAAY,CAACM,UAAU,CAAC,OAAO,CAAC;IAChCT,GAAG,CAAC;MAAEC,IAAI,EAAE,IAAI;MAAEC,KAAK,EAAE,IAAI;MAAEG,eAAe,EAAE;IAAM,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC,CAAC;AACH;AACAN,SAAS,CAACiB,QAAQ,CAAC,CAAC,CAACT,QAAQ,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}