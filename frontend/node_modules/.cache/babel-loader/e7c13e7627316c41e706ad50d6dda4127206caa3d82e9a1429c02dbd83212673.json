{"ast":null,"code":"// src/store/authStore.js\nimport { create } from \"zustand\";\nimport { loginRequest } from \"../api/authApi\";\nconst useAuthStore = create(set => ({\n  user: null,\n  token: typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null,\n  isAuthenticated: !!(typeof window !== \"undefined\" && localStorage.getItem(\"token\")),\n  login: async (email, password) => {\n    try {\n      const res = await loginRequest(email, password);\n      if (res !== null && res !== void 0 && res.token) {\n        if (typeof window !== \"undefined\") {\n          localStorage.setItem(\"token\", res.token);\n        }\n        set({\n          user: res.user,\n          token: res.token,\n          isAuthenticated: true\n        });\n      }\n      return res;\n    } catch (err) {\n      console.error(\"login error:\", err);\n      return {\n        success: false,\n        message: err.message || \"Login failed\"\n      };\n    }\n  },\n  logout: () => {\n    if (typeof window !== \"undefined\") {\n      localStorage.removeItem(\"token\");\n    }\n    set({\n      user: null,\n      token: null,\n      isAuthenticated: false\n    });\n  }\n}));\nexport default useAuthStore;","map":{"version":3,"names":["create","loginRequest","useAuthStore","set","user","token","window","localStorage","getItem","isAuthenticated","login","email","password","res","setItem","err","console","error","success","message","logout","removeItem"],"sources":["/home/jorge/Escritorio/Prioridad/Prueba/vortex/frontend/src/store/authStore.js"],"sourcesContent":["// src/store/authStore.js\nimport { create } from \"zustand\";\nimport { loginRequest } from \"../api/authApi\";\n\nconst useAuthStore = create((set) => ({\n  user: null,\n  token: typeof window !== \"undefined\" ? localStorage.getItem(\"token\") : null,\n  isAuthenticated: !!(typeof window !== \"undefined\" && localStorage.getItem(\"token\")),\n\n  login: async (email, password) => {\n    try {\n      const res = await loginRequest(email, password);\n\n      if (res?.token) {\n        if (typeof window !== \"undefined\") {\n          localStorage.setItem(\"token\", res.token);\n        }\n\n        set({\n          user: res.user,\n          token: res.token,\n          isAuthenticated: true,\n        });\n      }\n\n      return res;\n    } catch (err) {\n      console.error(\"login error:\", err);\n      return { success: false, message: err.message || \"Login failed\" };\n    }\n  },\n\n  logout: () => {\n    if (typeof window !== \"undefined\") {\n      localStorage.removeItem(\"token\");\n    }\n    set({ user: null, token: null, isAuthenticated: false });\n  },\n}));\n\nexport default useAuthStore;\n"],"mappings":"AAAA;AACA,SAASA,MAAM,QAAQ,SAAS;AAChC,SAASC,YAAY,QAAQ,gBAAgB;AAE7C,MAAMC,YAAY,GAAGF,MAAM,CAAEG,GAAG,KAAM;EACpCC,IAAI,EAAE,IAAI;EACVC,KAAK,EAAE,OAAOC,MAAM,KAAK,WAAW,GAAGC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,GAAG,IAAI;EAC3EC,eAAe,EAAE,CAAC,EAAE,OAAOH,MAAM,KAAK,WAAW,IAAIC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC;EAEnFE,KAAK,EAAE,MAAAA,CAAOC,KAAK,EAAEC,QAAQ,KAAK;IAChC,IAAI;MACF,MAAMC,GAAG,GAAG,MAAMZ,YAAY,CAACU,KAAK,EAAEC,QAAQ,CAAC;MAE/C,IAAIC,GAAG,aAAHA,GAAG,eAAHA,GAAG,CAAER,KAAK,EAAE;QACd,IAAI,OAAOC,MAAM,KAAK,WAAW,EAAE;UACjCC,YAAY,CAACO,OAAO,CAAC,OAAO,EAAED,GAAG,CAACR,KAAK,CAAC;QAC1C;QAEAF,GAAG,CAAC;UACFC,IAAI,EAAES,GAAG,CAACT,IAAI;UACdC,KAAK,EAAEQ,GAAG,CAACR,KAAK;UAChBI,eAAe,EAAE;QACnB,CAAC,CAAC;MACJ;MAEA,OAAOI,GAAG;IACZ,CAAC,CAAC,OAAOE,GAAG,EAAE;MACZC,OAAO,CAACC,KAAK,CAAC,cAAc,EAAEF,GAAG,CAAC;MAClC,OAAO;QAAEG,OAAO,EAAE,KAAK;QAAEC,OAAO,EAAEJ,GAAG,CAACI,OAAO,IAAI;MAAe,CAAC;IACnE;EACF,CAAC;EAEDC,MAAM,EAAEA,CAAA,KAAM;IACZ,IAAI,OAAOd,MAAM,KAAK,WAAW,EAAE;MACjCC,YAAY,CAACc,UAAU,CAAC,OAAO,CAAC;IAClC;IACAlB,GAAG,CAAC;MAAEC,IAAI,EAAE,IAAI;MAAEC,KAAK,EAAE,IAAI;MAAEI,eAAe,EAAE;IAAM,CAAC,CAAC;EAC1D;AACF,CAAC,CAAC,CAAC;AAEH,eAAeP,YAAY","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}